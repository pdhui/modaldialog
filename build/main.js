!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.pdDialog=t():e.pdDialog=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,exports,t){"use strict";function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"undefined"!=typeof e[n]&&(t[n]=e[n]);return t}function a(e){return"[object Object]"==Object.prototype.toString.call(e)}function o(){}function i(){function e(e){var t,o=c.dialogList;a.every(function(n,a){return n!=e?!0:void(t=a)}),null!=t&&(a.slice(t).forEach(function(e){o[n[e]].closeDialog(!0),delete n[e]}),a=a.slice(0,t))}var t=s(),n={},a=[];t.listener(function(t,n){var n=1*n;n&&0>t-n&&e(n)}),c.afterListener(function(e){var o=t.autoUpdateHash();n[o]=e.id,a.push(o)}),c.closedListener(function(e){var o,i=a.length-2,l=a[i];n[l]==e.id?(a.splice(i,1),n[l]=n[a[i]],delete n[a[i]],a[i]--):(o=a.pop(),delete n[o]),t.getCurrentHashPath()>0&&t.back()})}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t(1);var r=t(5),c=t(6),s=t(8);c.alert=function(e,t,a,i,r){var s=e.clazz?e.clazz:r?r:"";return s+=" alert-dialog","object"!==("undefined"==typeof e?"undefined":l(e))&&(e=n({title:t,content:e,okCallback:a,selector:i})),e.okCallback=e.okCallback||o,e.clazz=s,c(e)},c.confirm=function(e,t,a,i,r,s,u){var d=e.clazz?e.clazz:u?u:"";return d+=" confirm-dialog","object"!==("undefined"==typeof e?"undefined":l(e))&&(e=n({title:a,content:e,okCallback:t,cancelCallback:s,sureStr:r,cancelStr:i})),e.okCallback=e.okCallback||o,e.cancelCallback=e.cancelCallback||o,e.clazz=d,c(e)},c.alertAwardList=function(e,t,o,i,l,r,s){var u,d,p=['<div class="dlg-award-list"><ul>'];u=a(e)?e:n({dataList:e,title:t,okCallback:i,cancelCallback:l,sureStr:s||"分享到朋友圈",cancelStr:r||"确定",fillform:o}),u.clazz="myaward-dialog",d=u.dataList||[];for(var f=0,h=d.length;h>f;f++){var m=d[f];p.push('<li><img src="'+m.imgUrl+'" /><div class="item-title">'+m.name+"</div></li>")}return p.push('</ul><div class="address-controller"><span class="dlg-address">收货地址:</span><span class="dlg-input" data-id="fillform">填写</span></div></div>'),u.content=p.join(""),c(u)},c.alertPersonInfoDlg=function(e,t,i,l,s,u){var d,t,p,f,h=["<form>"];p=a(e)?e:n({formField:e,okCallback:i,cancelCallback:l,sureStr:u,cancelStr:s,values:t||[]}),p.okCallback=p.okCallback||o,p.cancelCallback=p.cancelCallback||o,e=p.formField=p.formField||[{name:"recName",value:"收件人:"},{name:"mobilephone",value:"手机号码:"},{name:"recAddress",value:"收件地址:"},{name:"message",value:"留言:"}],p.clazz="personinfo-dialog",p.header="";for(var m=0,v=e.length;v>m;m++){var g=e[m];h.push('<div class="form-item"><label>'),h.push(g.value),h.push('</label><input class="form-text" type="text" name="'+g.name+'"/></div>')}h.push('<div class="error-tip"></div>'),h.push("</form>"),f=r.createHtmlDom(h.join("")),d=f.querySelectorAll("input"),t=p.values;for(var m=0,v=d.length;v>m;m++)"undefined"!=typeof t[m]&&(d[m].value=t[m]);return p.selector=f,c(p)},c.showLoading=function(){document.getElementById("loading-box")||document.body.appendChild(r.createHtmlDom('<div id="loading-box" class="dialog-mask"><div class="load-contain"><span class="load1"></span><span class="load2"></span></div></div>')),document.getElementById("loading-box").style.display="block"},c.hideLoading=function(){document.getElementById("loading-box")&&(document.getElementById("loading-box").style.display="none")},c.showMask=function(){var e=document.getElementById("app-mask");e||(e=r.createHtmlDom("<div class='dialog-mask' id='app-mask'></div>"),r.bindEvent(e,"touchstart",function(e){e.preventDefault()}),document.body.appendChild(e)),e.style.display="block"},c.hideMask=function(){document.getElementById("app-mask").style.display="none"};var u={useHash:!1},d=!1;c.config=function(e){var t=r.assign({},u,e);return d?void console.info("modaldialg only can config once"):(t.useHash&&i(),void(d=!0))},e.exports=c},function(e,exports){},,,,function(e,exports){"use strict";e.exports={createHtmlDom:function(){var e=document.createElement("div");return function(t){var n;return e.innerHTML=t,n=e.children[0],e.removeChild(n),n}}(),replaceTemlate:function(e,t){for(var n,a=new RegExp(/{(.*?)}/g);n=a.exec(e);)e=e.replace(n[0],t[n[1]]);return e},bindEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unBindEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURI(n[2]):null},assign:function(){for(var e=arguments[0],t=[].slice.call(arguments,1),n=0,a=t.length;a>n;n++){var o=t[n];for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i])}return e},closest:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)"),a=e;if(e.className.match(n))return e;for(;(a=a.parentNode)&&"html"!=a.nodeName.toLowerCase();)if(a.className.match(n))return a;return null}}},function(e,exports,t){"use strict";function n(e){var t=[],n=e.header;return n=c.replaceTemlate(n,e),t.push('<div class="modal-dialog '+e.clazz+'"><div class="dialog-mask"></div><div class="modal-dialog-main"><header>'),t.push(n),t.push('</header><section><div class="dialog-content"></div></section><footer>'),t.push(o.call(this,e)),t.push("</footer></div></div>"),t.join("")}function a(){l=window.innerHeight?window.innerHeight:document.body.clientHeight,r=window.innerWidth?window.innerWidth:document.body.clientWidth}function o(e){var t=e.buttons||[],n='<button type="button" class="{cls}" data-id="{id}" >{name}</button>',a="",o=this,i="";return e.cancelCallback&&t.push({id:"cancel",name:e.cancelStr,callback:e.cancelCallback,cls:"cancle-btn"}),0==t.length&&(i=" modal-dialog-onebtn"),e.okCallback&&t.push({id:"ok",name:e.sureStr,callback:e.okCallback,cls:"sure-btn"+i}),e.reverse&&(t=t.reverse()),t.forEach(function(e,i){t.length-1==i&&(e.cls+=" last"),a+=c.replaceTemlate(n,e),o.callbacks[e.id]=e.callback}),a}function i(e,t){if(t.selector){var n=document.createComment("dialog-target replace"),a=t.selector,o=getComputedStyle(a).getPropertyValue("display");a.parentNode&&(a.parentNode.replaceChild(n,a),e._commentDom=n,"none"==o&&(a.style.display="block"),e._originDisplay=o),e.querySelector(".dialog-content").appendChild(a)}else e.querySelector(".dialog-content").innerHTML=t.content.replace(/(\r\n|\n|\r)/gm,"<br/>")}var l,r,c=t(5),s=t(7),u={assign:c.assign};c.bindEvent(window,"resize",a),a();var d={clazz:"dialog-theme",cancelStr:"取消",sureStr:"确定",title:"温馨提示",header:'<span class="dialog-title">{title}</span>',animated:!0,buttons:null,useBackground:"cancel"},p=[],f=[],h=[],m=0,v=function g(e){var t,n;return e=u.assign({},d,e),e._callBacks=e._callBacks||{},n=e.id=e.id||m,Object.keys(e).forEach(function(t){"function"==typeof e[t]&&(e._callBacks[t]=e[t])}),p.forEach(function(t){t(e)}),g.dialogList[n]=t=new g.create(e),g.modalCount++,f.forEach(function(e){e(t)}),m++,t};v.create=function(e){var t,a;if(this.callbacks=e._callBacks,this.id=e.id,t=c.createHtmlDom(n.call(this,e)),t.setAttribute("data-pos",0),i(t,e),document.body.appendChild(t),this.dlgScroll=s.initTouch(t),a=this.getPos(t),u.assign(t.style,{display:"block",left:a.left+"px",top:a.top+"px"}),e.animated&&(t.querySelector(".modal-dialog-main").className+=" dlg-animation"),e.useBackground){var o=e.useBackground;e._callBacks[o]||(e._callBacks[o]=function(){}),t.querySelector(".dialog-mask").dataset.id=e.useBackground}return this._eventListener=this.proxy(this._clickEvent,t,e),this.dialogDom=t,this.options=e,c.bindEvent(t,"click",this._eventListener),this},u.assign(v.create.prototype,{callbacks:null,getPos:function(e){if(e=e||this.dialogDom,!e)return{left:0,top:0};var t=e.offsetHeight,n=e.offsetWidth,a=l-t>0?(l-t)/2:.1*l,o=r-n>0?(r-n)/2:.1*r;return{left:o,top:a}},closeDialog:function(e){var t,n,a=this.dialogDom,o=this.options,i=this;a.style.display="none",o.selector&&a._commentDom&&(t=o.selector,n=a._commentDom,t.style.display=a._originDisplay,n.parentNode.replaceChild(t,n),a._commentDom=null,a._originDisplay=null),c.unBindEvent(a,"click",this._eventListener),a.parentNode.removeChild(a),this.dlgScroll.destroyScroll&&this.dlgScroll.destroyScroll(),e?o.cancelCallback&&o.cancelCallback():h.forEach(function(e){e(i)}),this._eventListener=null,this.dialogDom=a=null,delete v.dialogList[this.id],v.modalCount--},refresh:function(){var e=this.dialogDom,t=this.getPos(e);u.assign(e.style,{display:"block",left:t.left+"px",top:t.top+"px"}),this.dlgScroll.refresh()},_clickEvent:function(e,t,n){var a=e.target,o=a.getAttribute("data-id"),i=this;"function"!=typeof this.callbacks[o]||this.callbacks[o].call(this,e)||setTimeout(function(){i.closeDialog()},1)},proxy:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){var a=Array.prototype.slice.call(arguments);n.length>0&&(a=a.concat(n)),e.apply(t,a)}}}),v.afterListener=function(e){return f.push(e),function(){f=f.filter(function(t){return t!=e})}},v.preListener=function(e){return p.push(e),function(){p=p.filter(function(t){return t!=e})}},v.closedListener=function(e){return h.push(e),function(){h=h.filter(function(t){return t!=e})}},v.dialogList={},v.modalCount=0,e.exports=v},function(e,exports,t){"use strict";function n(e,t){var n=getComputedStyle(e),a=0;return t&&(a=1*n.getPropertyValue("margin-top").replace("px","")+1*n.getPropertyValue("margin-bottom").replace("px","")),1*n.getPropertyValue("height").replace("px","")+1*n.paddingTop.replace("px","")+1*n.paddingBottom.replace("px","")+1*n.borderTopWidth.replace("px","")+1*n.borderBottomWidth.replace("px","")+a}var a=t(5),o={circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)"}};e.exports={initTouch:function(e){function t(e){var t,n=e.touches[0],o=a.closest(e.target,"dialog-content");o?(E&&(p(),E=!1,t=d(),c(Math.round(t.x),Math.round(t.y))),m=n.pageX,v=n.pageY,b=Date.now(),k=y=0,w=z,x=_,g=!0):g=!1}function i(e){var t,n=e.touches[0],a=n.pageX,o=n.pageY,i=e.target.nodeName.toLowerCase(),l=Date.now(),r=o-v,s=a-m;return m=a,v=o,k+=s,y+=r,l-L>300&&Math.abs(y)<10||!g||h>=0?void e.preventDefault():(t=_+r,(t>0||h>t)&&(t=_+r/3),c(C,t),"input"!=i&&"select"!=i&&"textarea"!=i&&(e.preventDefault(),e.stopPropagation()),void(l-b>300&&(b=l,w=z,x=_)))}function l(e){var t,n=Date.now()-b,a=Math.round(_),o=(Math.abs(a-x),0);m=null,v=null,L=Date.now(),E=0,s(C,500)||h>=0||(r(C,a),300>n&&(t=u(_,x,n),a=t.destination,o=t.duration,E=1),a!=_&&r(C,a,o))}function r(e,t,n){n=n||0,E=n>0,p(n),c(e,t)}function c(e,t){D.webkitTransform="translate3d(0px,"+t+"px,0px)",_=t}function s(e,t){var n=_;return t=t||0,n>=0?n=0:h>n&&(n=h),n==_?!1:(r(e,n,t),!0)}function u(e,t,n){var a,o,i=e-t,l=Math.abs(i)/n,r=6e-4;return a=e+l*l/(2*r)*(0>i?-1:1),o=l/r,h>a?(a=h-B/2.5*(l/8),i=Math.abs(a-e),o=i/l):a>0&&(a=B/2.5*(l/8),i=Math.abs(e)+a,o=i/l),{destination:Math.round(a),duration:o}}function d(){var e,t,n=window.getComputedStyle(C,null);return n=n.webkitTransform.split(")")[0].split(", "),e=+(n[12]||n[4]),t=+(n[13]||n[5]),{x:e,y:t}}function p(e){e=e||0,D.transitionDuration=e+"ms"}function f(){E&&(p(),s(C)||(E=0))}var h,m,v,g,b,y,k,w,x,E,C=e.querySelector(".dialog-content"),S=e.getElementsByTagName("section")[0],D=C.style,B=1*getComputedStyle(S).getPropertyValue("height").replace("px",""),L=0,z=0,_=0;return h=B-n(C,!0),D.transitionTimingFunction=o.circular.style,a.bindEvent(e,"touchmove",i),a.bindEvent(e,"touchstart",t),a.bindEvent(e,"touchend",l),a.bindEvent(C,"transitionend",f),a.bindEvent(C,"webkitTransitionEnd",f),{destroyScroll:function(){a.unBindEvent(e,"touchmove",i),a.unBindEvent(e,"touchstart",t),a.unBindEvent(e,"touchend",l),a.unBindEvent(C,"transitionend",f),a.unBindEvent(C,"webkitTransitionEnd",f),C=S=null},refresh:function(){B=1*getComputedStyle(S).getPropertyValue("height").replace("px",""),h=B-n(C,!0)}}}}},function(e,exports,t){"use strict";var n=t(5),a="hashchange",o="_dg_hash",i=function(e){var t="",i=[],l=function(){var e=window.location.href,t=new RegExp("^"+o+"=(.*)"),n=e.indexOf("#"),a=void 0,i="",l=void 0;return-1!=n&&(i=e.substring(n+1)||"",(a=i.indexOf("?")>0)&&(i=i.substring(0,a)),l=t.exec(i),l&&(i=l[1])),i},r=function(){(0,n.unBindEvent)(window,a,h)},c=function(e){return i.push(e),function(){return i=i.filter(function(t){return t!==e})}},s=function(e){return window.location.hash=e},u=function(e){return window.location.replace(window.location.pathname+window.location.search+"#"+e)},d=function(){var e=1*l();return e?e++:e=1,s(o+"="+e),e},p=function(e){e&&window.history.go(e)},f=function(){window.history.back()},h=function(){var e=l();t!==e&&(i.forEach(function(n){n(e,t)}),t=e)};return(0,n.bindEvent)(window,a,h),{getCurrentHashPath:l,listener:c,stopListener:r,pushHashPath:s,replaceHashPath:u,autoUpdateHash:d,go:p,back:f}};e.exports=i}])});