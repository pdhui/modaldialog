!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.pdDialog=t():e.pdDialog=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var l=n[a]={exports:{},id:a,loaded:!1};return e[a].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,exports,t){function n(e){var t=[],n=e.okBtn,a=e.cancelBtn,l=e.header,o="",r=[];return n=c.replaceTemlate(n,e),a=c.replaceTemlate(a,e),l=c.replaceTemlate(l,e),t.push('<div class="modal-dialog '+e.clazz+'" style="position:fixed;"><header>'),t.push(l),t.push('</header><section><div class="dialog-content"></div></section><footer>'),2==e.btnCount?r.push('<div class="cancle-btn">'+a+"</div>"):1==e.btnCount&&(o=" modal-dialog-onebtn"),r.push('<div class="sure-btn'+o+'">'+n+"</div>"),e.reverse&&(r=r.reverse()),t=t.concat(r),t.push("</footer></div>"),t.join("")}function a(){function e(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"undefined"!=typeof e[n]&&(t[n]=e[n]);return t}var t,a,l={clazz:"dialog-theme",cancelStr:"取消",sureStr:"确定",title:"温馨提示",okBtn:'<a href="javascript:void(0);">{sureStr}</a>',cancelBtn:'<a href="javascript:void(0);">{cancelStr}</a>',header:'<span class="dialog-title">{title}</span>',animated:!0},r=document.querySelector(".dialog-mask"),i={insertContent:function(e,t){if(t.selector){var n=document.createComment("dialog-target replace"),a=t.selector,l=getComputedStyle(a).getPropertyValue("display");a.parentNode.replaceChild(n,a),e._commentDom=n,"none"==l&&(a.style.display="block"),e._originDisplay=l,e.querySelector(".dialog-content").appendChild(t.selector)}else e.querySelector(".dialog-content").innerHTML=t.content.replace(/(\r\n|\n|\r)/gm,"<br/>")},createAlert:function(e){var t,a,l="alert-dialog ";return e.clazz&&(l+=e.clazz),a=o.assign({},e,{clazz:l,btnCount:1}),t=c.createHtmlDom(n(a)),t.setAttribute("data-pos",0),this.insertContent(t,e),document.body.appendChild(t),c.bindEvent(t.querySelector(".sure-btn"),"click",c.sureCallback),t},createConfirm:function(e){var t,a,l="alert-dialog ";return e.clazz&&(l+=e.clazz),t=o.assign({},e,{clazz:"confirm-dialog",btnCount:2}),a=c.createHtmlDom(n(t)),a.setAttribute("data-pos",0),this.insertContent(a,e),document.body.appendChild(a),c.bindEvent(a.querySelector(".cancle-btn"),"click",c.cancelCallback),c.bindEvent(a.querySelector(".sure-btn"),"click",c.sureCallback),a},createMyAwardDlg:function(e){function t(){e.inputCallback(),c.unBindEvent(l.querySelector(".dlg-input"),"click",t),l.style.display="none",r.style.display="none",l.parentNode.removeChild(l)}for(var a=o.assign({},e,{clazz:"myaward-dialog",btnCount:2}),l=c.createHtmlDom(n(a)),i=e.dataList||[],s=['<div class="dlg-award-list"><ul>'],d=0,u=i.length;u>d;d++){var p=i[d];s.push('<li><img src="'+p.imgUrl+'" /><div class="item-title">'+p.name+"</div></li>")}return s.push('</ul><div class="address-controller"><span class="dlg-address">收货地址:</span><span class="dlg-input">填写</span></div></div>'),l.setAttribute("data-pos",0),l.querySelector(".dialog-content").innerHTML=s.join(""),document.body.appendChild(l),c.bindEvent(l.querySelector(".cancle-btn"),"click",c.cancelCallback),c.bindEvent(l.querySelector(".sure-btn"),"click",c.sureCallback),c.bindEvent(l.querySelector(".dlg-input"),"click",t),l},createPersonInfoDlg:function(e){for(var t,a=o.assign({},e,{clazz:"personinfo-dialog",btnCount:2,header:""}),l=c.createHtmlDom(n(a)),r=["<form>"],i=e.values,s=e.formField||[{name:"recName",value:"收件人:"},{name:"mobilephone",value:"手机号码:"},{name:"recAddress",value:"收件地址:"},{name:"message",value:"留言:"}],d=0,u=s.length;u>d;d++){var p=s[d];r.push('<div class="form-item"><label>'),r.push(p.value),r.push('</label><input class="form-text" type="text" name="'+p.name+'"/></div>')}r.push("</form>"),l.setAttribute("data-pos",0),l.querySelector(".dialog-content").innerHTML=r.join(""),t=l.querySelectorAll(".dialog-content input");for(var d=0,u=t.length;u>d;d++)"undefined"!=typeof i[d]&&t[d]&&(t[d].value=i[d]);return document.body.appendChild(l),c.bindEvent(l.querySelector(".sure-btn"),"click",c.sureCallback),c.bindEvent(l.querySelector(".cancle-btn"),"click",c.cancelCallback),l}};return r||(r=c.createHtmlDom("<div class='dialog-mask'></div>"),c.bindEvent(r,"touchstart",function(e){e.preventDefault()}),document.body.appendChild(r)),{closeDialog:function(e,t){var n,a;this.hideMask(),e.style.display="none",t.selector&&(n=t.selector,a=e._commentDom,n.style.display=e._originDisplay,a.parentNode.replaceChild(n,a),e._commentDom=null,e._originDisplay=null),e.parentNode.removeChild(e)},dialog:function(e){var n,r,s,d,u,p=e.type,f=this;switch(e=o.assign({},l,e),p){case"alert":n=i.createAlert(e);break;case"confirm":n=i.createConfirm(e);break;case"awardlist":n=i.createMyAwardDlg(e);break;case"personinfo":n=i.createPersonInfoDlg(e)}this.initTouch(n),t||(t=window.innerHeight?window.innerHeight:document.body.clientHeight),a||(a=window.innerWidth?window.innerWidth:document.body.clientWidth),u=n.offsetHeight,d=n.offsetWidth,r=t-u>0?(t-u)/2:.1*t,s=a-d>0?(a-d)/2:.1*a,c.addCallback(function(t){setTimeout(function(){f.closeDialog(n,e)},1),"function"==typeof e.okCallback&&e.okCallback(t)},function(t){setTimeout(function(){f.closeDialog(n,e)},1),"function"==typeof e.cancelCallback&&e.cancelCallback(t)}),f.showMask(),o.assign(n.style,{display:"block",left:s+"px",top:r+"px"}),e.animated&&(n.className+=" dlg-animation")},confirm:function(t,n,a,l,c,r){if("object"==typeof t)this.dialog(o.assign({type:"confirm"},t));else{var i={type:"confirm",title:a,content:t,okCallback:n,cancelCallback:r,sureStr:c,cancelStr:l};this.dialog(e(i))}},alert:function(t,n,a,l){if("object"==typeof t)this.dialog(o.assign({type:"alert"},t));else{var c={type:"alert",title:n,content:t,okCallback:a,selector:l};this.dialog(e(c))}},alertAwardList:function(t,n,a,l,o,c,r){var i={type:"awardlist",dataList:t,title:n,okCallback:l,cancelCallback:o,sureStr:r||"分享到朋友圈",cancelStr:c||"确定",inputCallback:a};this.dialog(e(i))},alertPersonInfoDlg:function(t,n,a,l,o,c){var r={type:"personinfo",formField:t,okCallback:a,cancelCallback:l,sureStr:c,cancelStr:o,values:n||[]};this.dialog(e(r))},showMask:function(){r.style.display="block"},hideMask:function(){r.style.display="none"},showLoading:function(){document.getElementById("loading-box")||$("body").append('<div id="loading-box" class="dialog-mask"><div class="load-contain"><span class="load1"></span><span class="load2"></span></div></div>'),document.getElementById("loading-box").style.display="block"},hideLoading:function(){document.getElementById("loading-box").style.display="none"},initTouch:function(e){function t(e){var t=e.touches[0];e.target.className.indexOf("dialog-content")>=0&&(i=t.screenX,s=t.screenY,d=!0)}function n(e){var t,n=e.touches[0],a=e.target,o=e.currentTarget,c=a.nodeName.toLowerCase(),u=n.screenX,p=n.screenY,f=1*o.attributes["data-pos"].value||0;return d&&Math.abs(u-i)<10&&Math.abs(p-s)>10&&(t=f+p-s,r>t?t=r:t>0&&(t=0),o.attributes["data-pos"].value=t,l(a,f,t),i=u,s=p),"input"!=c&&"select"!=c&&"textarea"!=c&&(e.preventDefault(),e.stopPropagation()),!1}function a(){i=null,s=null,d=!1}function l(e,t,n){function a(){t-=o,u>t&&(l(),t=u),e.style.webkitTransform="translate3d(0px,"+t+"px,0px)"}function l(){p=null,clearInterval(p)}var o=5;u=n,null!=p&&l(),p=setInterval(a,18),a()}function o(e,t){var n=getComputedStyle(e),a=0;return t&&(a=1*n.getPropertyValue("margin-top").replace("px","")+1*n.getPropertyValue("margin-bottom").replace("px","")),1*n.getPropertyValue("height").replace("px","")+1*n.paddingTop.replace("px","")+1*n.paddingBottom.replace("px","")+1*n.borderTopWidth.replace("px","")+1*n.borderBottomWidth.replace("px","")+a}var r,i,s,d,u,p,f=e.querySelector(".dialog-content"),m=e.getElementsByTagName("section")[0];r=1*getComputedStyle(m).getPropertyValue("height").replace("px","")-o(f,!0),c.bindEvent(e,"touchmove",n),c.bindEvent(e,"touchstart",t),c.bindEvent(e,"touchend",a)}}}t(1);var l=t(5),o={assign:l.assign},c=o.assign({callbacks:[],cancelCallback:function(e){var t=e.target,n=c.callbacks.pop();c.clearListener(t,n),n.cancelFn&&(n.cancelFn(e)?c.callbacks.push(n):c.clearListener(t,n))},sureCallback:function(e){var t=e.target,n=c.callbacks.pop();n.okFn&&(n.okFn(e)?c.callbacks.push(n):c.clearListener(t,n))},clearListener:function(e,t){t.cancelFn&&c.unBindEvent(e,"click",c.cancelCallback),t.okFn&&c.unBindEvent(e,"click",c.sureCallback)},addCallback:function(e,t){t?c.callbacks.push({okFn:e,cancelFn:t}):c.callbacks.push({okFn:e})}},l);e.exports=a()},function(e,exports){},,,,function(e,exports){e.exports={createHtmlDom:function(){var e=document.createElement("div");return function(t){var n;return e.innerHTML=t,n=e.children[0],e.removeChild(n),n}}(),replaceTemlate:function(e,t){for(var n,a=new RegExp(/{(.*?)}/g);n=a.exec(e);)e=e.replace(n[0],t[n[1]]);return e},bindEvent:function(e,t,n){e.addEventListener(t,n,!1)},unBindEvent:function(e,t,n){e.removeEventListener(t,n)},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURI(n[2]):null},assign:function(){for(var e=arguments[0],t=[].slice.call(arguments,1),n=0,a=t.length;a>n;n++){var l=t[n];for(var o in l)l.hasOwnProperty(o)&&(e[o]=l[o])}return e}}}])});