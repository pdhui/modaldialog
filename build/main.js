!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.pdDialog=t():e.pdDialog=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,exports,t){"use strict";function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"undefined"!=typeof e[n]&&(t[n]=e[n]);return t}function a(e){return"[object Object]"==Object.prototype.toString.call(e)}function o(){}function i(){function e(e){var t,o=c.dialogList;a.every(function(n,a){return n!=e?!0:void(t=a)}),null!=t&&(a.slice(t).forEach(function(e){o[n[e]].closeDialog(!0),delete n[e]}),a=a.slice(0,t))}var t=s(),n={},a=[];t.listener(function(t,n){var n=1*n;n&&0>t-n&&e(n)}),c.afterListener(function(e){var o=t.autoUpdateHash();n[o]=e.id,a.push(o)}),c.closedListener(function(e){var o,i=a.length-2,l=a[i];n[l]==e.id?(a.splice(i,1),n[l]=n[a[i]],delete n[a[i]],a[i]--):(o=a.pop(),delete n[o]),t.getCurrentHashPath()>0&&t.back()})}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t(1);var r=t(5),c=t(6),s=t(8);c.alert=function(e,t,a,i,r){var s=e.clazz?e.clazz:r?r:"";return s+=" alert-dialog","object"!==("undefined"==typeof e?"undefined":l(e))&&(e=n({title:t,content:e,okCallback:a,selector:i})),e.okCallback=e.okCallback||o,e.clazz=s,c(e)},c.confirm=function(e,t,a,i,r,s,u){var d=e.clazz?e.clazz:u?u:"";return d+=" confirm-dialog","object"!==("undefined"==typeof e?"undefined":l(e))&&(e=n({title:a,content:e,okCallback:t,cancelCallback:s,sureStr:r,cancelStr:i})),e.okCallback=e.okCallback||o,e.cancelCallback=e.cancelCallback||o,e.clazz=d,c(e)},c.alertAwardList=function(e,t,o,i,l,r,s){var u,d,p=['<div class="dlg-award-list"><ul>'];u=a(e)?e:n({dataList:e,title:t,okCallback:i,cancelCallback:l,sureStr:s||"分享到朋友圈",cancelStr:r||"确定",fillform:o}),u.clazz="myaward-dialog",d=u.dataList||[];for(var f=0,h=d.length;h>f;f++){var m=d[f];p.push('<li><img src="'+m.imgUrl+'" /><div class="item-title">'+m.name+"</div></li>")}return p.push('</ul><div class="address-controller"><span class="dlg-address">收货地址:</span><span class="dlg-input" data-id="fillform">填写</span></div></div>'),u.content=p.join(""),c(u)},c.alertPersonInfoDlg=function(e,t,i,l,s,u){var d,t,p,f,h=["<form>"];p=a(e)?e:n({formField:e,okCallback:i,cancelCallback:l,sureStr:u,cancelStr:s,values:t||[]}),p.okCallback=p.okCallback||o,p.cancelCallback=p.cancelCallback||o,e=p.formField=p.formField||[{name:"recName",value:"收件人:"},{name:"mobilephone",value:"手机号码:"},{name:"recAddress",value:"收件地址:"},{name:"message",value:"留言:"}],p.clazz="personinfo-dialog",p.header="";for(var m=0,v=e.length;v>m;m++){var g=e[m];h.push('<div class="form-item"><label>'),h.push(g.value),h.push('</label><input class="form-text" type="text" name="'+g.name+'"/></div>')}h.push('<div class="error-tip"></div>'),h.push("</form>"),f=r.createHtmlDom(h.join("")),d=f.querySelectorAll("input"),t=p.values;for(var m=0,v=d.length;v>m;m++)"undefined"!=typeof t[m]&&(d[m].value=t[m]);return p.selector=f,c(p)},c.showLoading=function(){document.getElementById("loading-box")||document.body.appendChild(r.createHtmlDom('<div id="loading-box" class="dialog-mask"><div class="load-contain"><span class="load1"></span><span class="load2"></span></div></div>')),document.getElementById("loading-box").style.display="block"},c.hideLoading=function(){document.getElementById("loading-box")&&(document.getElementById("loading-box").style.display="none")},c.showMask=function(){var e=document.getElementById("app-mask");e||(e=r.createHtmlDom("<div class='dialog-mask' id='app-mask'></div>"),r.bindEvent(e,"touchstart",function(e){e.preventDefault()}),document.body.appendChild(e)),e.style.display="block"},c.hideMask=function(){document.getElementById("app-mask").style.display="none"};var u={useHash:!1};c.config=function(e){var t=r.assign({},u,e);t.useHash&&i()},e.exports=c},function(e,exports){},,,,function(e,exports){"use strict";e.exports={createHtmlDom:function(){var e=document.createElement("div");return function(t){var n;return e.innerHTML=t,n=e.children[0],e.removeChild(n),n}}(),replaceTemlate:function(e,t){for(var n,a=new RegExp(/{(.*?)}/g);n=a.exec(e);)e=e.replace(n[0],t[n[1]]);return e},bindEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unBindEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURI(n[2]):null},assign:function(){for(var e=arguments[0],t=[].slice.call(arguments,1),n=0,a=t.length;a>n;n++){var o=t[n];for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i])}return e},closest:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)"),a=e;if(e.className.match(n))return e;for(;(a=a.parentNode)&&"html"!=a.nodeName.toLowerCase();)if(a.className.match(n))return a;return null}}},function(e,exports,t){"use strict";function n(e){var t=[],n=e.header;return n=i.replaceTemlate(n,e),t.push('<div class="modal-dialog '+e.clazz+'" style="position:fixed;"><div class="dialog-mask"></div><div class="modal-dialog-main"><header>'),t.push(n),t.push('</header><section><div class="dialog-content"></div></section><footer>'),t.push(a.call(this,e)),t.push("</footer></div></div>"),t.join("")}function a(e){var t=e.buttons||[],n='<button type="button" class="{cls}" data-id="{id}" >{name}</button>',a="",o=this,l="";return e.cancelCallback&&t.push({id:"cancel",name:e.cancelStr,callback:e.cancelCallback,cls:"cancle-btn"}),0==t.length&&(l=" modal-dialog-onebtn"),e.okCallback&&t.push({id:"ok",name:e.sureStr,callback:e.okCallback,cls:"sure-btn"+l}),e.reverse&&(t=t.reverse()),t.forEach(function(e,l){t.length-1==l&&(e.cls+=" last"),a+=i.replaceTemlate(n,e),o.callbacks[e.id]=e.callback}),a}function o(e,t){if(t.selector){var n=document.createComment("dialog-target replace"),a=t.selector,o=getComputedStyle(a).getPropertyValue("display");a.parentNode&&(a.parentNode.replaceChild(n,a),e._commentDom=n,"none"==o&&(a.style.display="block"),e._originDisplay=o),e.querySelector(".dialog-content").appendChild(a)}else e.querySelector(".dialog-content").innerHTML=t.content.replace(/(\r\n|\n|\r)/gm,"<br/>")}var i=t(5),l=t(7),r={assign:i.assign},c={clazz:"dialog-theme",cancelStr:"取消",sureStr:"确定",title:"温馨提示",header:'<span class="dialog-title">{title}</span>',animated:!0,buttons:null},s=[],u=[],d=[],p=0,f=function h(e){var t,n;return e=r.assign({},c,e),e._callBacks=e._callBacks||{},n=e.id=e.id||p,Object.keys(e).forEach(function(t){"function"==typeof e[t]&&(e._callBacks[t]=e[t])}),s.forEach(function(t){t(e)}),h.dialogList[n]=t=new h.create(e),u.forEach(function(e){e(t)}),p++,t};f.create=function(e){var t,a,c,s,u;return this.callbacks=e._callBacks,this.id=e.id,t=i.createHtmlDom(n.call(this,e)),t.setAttribute("data-pos",0),o(t,e),document.body.appendChild(t),this.destroyScroll=l.initTouch(t),this.winH||(this.winH=window.innerHeight?window.innerHeight:document.body.clientHeight),this.winW||(this.winW=window.innerWidth?window.innerWidth:document.body.clientWidth),u=t.offsetHeight,s=t.offsetWidth,a=this.winH-u>0?(this.winH-u)/2:.1*this.winH,c=this.winW-s>0?(this.winW-s)/2:.1*this.winW,r.assign(t.style,{display:"block",left:c+"px",top:a+"px"}),r.assign(t.querySelector(".dialog-mask").style,{height:this.winH+50+"px"}),e.animated&&(t.querySelector(".modal-dialog-main").className+=" dlg-animation"),this._eventListener=this.proxy(this._clickEvent,t,e),this.dialogDom=t,this.options=e,i.bindEvent(t,"click",this._eventListener),this},r.assign(f.create.prototype,{callbacks:null,closeDialog:function(e){var t,n,a=this.dialogDom,o=this.options,l=this;a.style.display="none",o.selector&&a._commentDom&&(t=o.selector,n=a._commentDom,t.style.display=a._originDisplay,n.parentNode.replaceChild(t,n),a._commentDom=null,a._originDisplay=null),i.unBindEvent(a,"click",this._eventListener),a.parentNode.removeChild(a),this.destroyScroll(),e?o.cancelCallback&&o.cancelCallback():d.forEach(function(e){e(l)}),this._eventListener=null,this.dialogDom=a=null,delete f.dialogList[this.id]},_clickEvent:function(e,t,n){var a=e.target,o=a.getAttribute("data-id"),i=this;"function"!=typeof this.callbacks[o]||this.callbacks[o].call(this,e)||setTimeout(function(){i.closeDialog()},1)},proxy:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){var a=Array.prototype.slice.call(arguments);n.length>0&&(a=a.concat(n)),e.apply(t,a)}}}),f.afterListener=function(e){return u.push(e),function(){u=u.filter(function(t){return t!=e})}},f.preListener=function(e){return s.push(e),function(){s=s.filter(function(t){return t!=e})}},f.closedListener=function(e){return d.push(e),function(){d=d.filter(function(t){return t!=e})}},f.dialogList={},e.exports=f},function(e,exports,t){"use strict";function n(e,t){var n=getComputedStyle(e),a=0;return t&&(a=1*n.getPropertyValue("margin-top").replace("px","")+1*n.getPropertyValue("margin-bottom").replace("px","")),1*n.getPropertyValue("height").replace("px","")+1*n.paddingTop.replace("px","")+1*n.paddingBottom.replace("px","")+1*n.borderTopWidth.replace("px","")+1*n.borderBottomWidth.replace("px","")+a}var a=t(5);e.exports={initTouch:function(e){function t(e){var t=e.touches[0],n=a.closest(e.target,"dialog-content");n&&(c=t.screenX,s=t.screenY,u=!0)}function o(e){var t,n=e.touches[0],a=e.target,o=e.currentTarget,i=a.nodeName.toLowerCase(),p=n.screenX,f=n.screenY,h=1*o.attributes["data-pos"].value||0;return u&&Math.abs(p-c)<10&&Math.abs(f-s)>10&&(t=h+f-s,r>t?t=r:t>0&&(t=0),o.attributes["data-pos"].value=t,l(d,h,t),c=p,s=f),"input"!=i&&"select"!=i&&"textarea"!=i&&(e.preventDefault(),e.stopPropagation()),!1}function i(){c=null,s=null,u=!1}function l(e,t,n){e.style.webkitTransform="translate3d(0px,"+n+"px,0px)"}var r,c,s,u,d=e.querySelector(".dialog-content"),p=e.getElementsByTagName("section")[0];return r=1*getComputedStyle(p).getPropertyValue("height").replace("px","")-n(d,!0),a.bindEvent(e,"touchmove",o),a.bindEvent(e,"touchstart",t),a.bindEvent(e,"touchend",i),function(){a.unBindEvent(e,"touchmove",o),a.unBindEvent(e,"touchstart",t),a.unBindEvent(e,"touchend",i)}}}},function(e,exports,t){"use strict";var n=t(5),a="hashchange",o="_dg_hash",i=function(e){var t="",i=[],l=function(){var e=window.location.href,t=new RegExp("^"+o+"=(.*)"),n=e.indexOf("#"),a=void 0,i="",l=void 0;return-1!=n&&(i=e.substring(n+1)||"",(a=i.indexOf("?")>0)&&(i=i.substring(0,a)),l=t.exec(i),l&&(i=l[1])),i},r=function(){(0,n.unBindEvent)(window,a,h)},c=function(e){return i.push(e),function(){return i=i.filter(function(t){return t!==e})}},s=function(e){return window.location.hash=e},u=function(e){return window.location.replace(window.location.pathname+window.location.search+"#"+e)},d=function(){var e=1*l();return e?e++:e=1,s(o+"="+e),e},p=function(e){e&&window.history.go(e)},f=function(){window.history.back()},h=function(){var e=l();t!==e&&(i.forEach(function(n){n(e,t)}),t=e)};return(0,n.bindEvent)(window,a,h),{getCurrentHashPath:l,listener:c,stopListener:r,pushHashPath:s,replaceHashPath:u,autoUpdateHash:d,go:p,back:f}};e.exports=i}])});